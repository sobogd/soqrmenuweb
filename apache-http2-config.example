# Apache configuration example for HTTP/2
# This file is for reference only - apply to your server

# Enable HTTP/2 module
# Run: sudo a2enmod http2

<VirtualHost *:443>
    ServerName sobogdqr.com
    ServerAlias www.sobogdqr.com

    # Enable HTTP/2
    Protocols h2 http/1.1

    # SSL Certificate (required for HTTP/2)
    SSLEngine on
    SSLCertificateFile /path/to/your/certificate.crt
    SSLCertificateKeyFile /path/to/your/private.key
    SSLCertificateChainFile /path/to/your/ca-bundle.crt

    # SSL Configuration
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite HIGH:!aNULL:!MD5
    SSLHonorCipherOrder on

    # Proxy to Next.js
    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    # Enable compression
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
    </IfModule>

    # Cache static assets
    <Location "/_next/static">
        Header set Cache-Control "public, immutable, max-age=31536000"
    </Location>
</VirtualHost>

# Redirect HTTP to HTTPS
<VirtualHost *:80>
    ServerName sobogdqr.com
    ServerAlias www.sobogdqr.com
    Redirect permanent / https://sobogdqr.com/
</VirtualHost>
